# Symlink to this from /etc/nginx/sites-available/steak-place.
# Then symlink to that from /etc/nginx/sites-enabled and rm /etc/nginx/sites-enabled/default.

server {
  listen 80 default_server;
  listen [::]:80 default_server ipv6only=on;

  root /home/dougo/steak-place/public;
  index index.html;
  charset utf-8;

  # Make site accessible from http://localhost/
  server_name localhost;

  location / {
    try_files $uri $uri/ =404;
  }

  location ~ \.(rkt|ss|scm)(\;.*)?$ {
    try_files $uri $uri/ @racket;
  }

  # deny access to .htaccess files, if Apache's document root concurs with nginx's one
  location ~ /\.ht {
    deny all;
  }

  location @racket {
     proxy_pass http://localhost:8080;
  }
}
